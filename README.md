# e-fabrika

Система управления не большим производством электроники

## Что умеет система?

Система предназначена для облегчения управлением небольшим производством электроники и для радиолюбителей. Основная задача, которую решает система - это управление запасами элементов, подсчет стоимости выпуска продукции, подсчет и проверка доступности элементов для выпуска продукции.

### Основные понятия системы

**Элемент** - это базовое понятие системы, это минимальная и неделимая единица. Например: *транзистор, конденсатор, печатная плата*. Так же элементом может быть готовый модуль, который закупается как единое целое. У элемента могут быть следующие свойства:

* **Наименование** - короткое название для элемента
* **Описание** - более подробное наименование элемента
* **Тип** - это значение выбирается из справочника, и позволяет разбить все элементы на группы
* **Место хранения** - указывает, где на складе хранится элемент
* **Изображение** - картинка с внешним видом элемента

Из элементов собираются **платы**, а из плат и элементов собираются **устройства**.

**Поставщик** - это источник поступления элементов на склад. Например: *AliExpress, Чип и Дип, Платан*. Список поставщиков хранится в отдельном справочнике. У поставщика доступно лишь одно свойство - **Наименование**.

**Плата** - это минимальная сборочная единица. Чаще всего - это именно печатная плата и установленные на нее элементы. Платой так же можно считать, например, кабельную сборку. То есть плата, это то, что состоит только из элементов.

У платы могут быть следующие свойства:

* **Название** – краткое наименование платы
* **Ревизия** – в случае с платой, смена ревизии чаще всего означает перетрассировку печатной платы без изменения ее назначения. Например, замена снятого с производства микроконтроллера на другой, это как раз смена ревизии платы.
* **Исполнение** – обычно, одно исполнение платы от другого отличается только комплектацией элементов. Например, базовое исполнение 00 включает все элементы, а вот в исполнении 01 часть элементов может не монтироваться.
* **Изображение** – картинка с внешним видом платы
* **Перечень элементов** – список входящих в плату элементов

**Устройство** - это более сложная сборочная единица. Устройство состоит из плат и элементов. Чаще всего устройство это корпус (в терминологии системы это элемент) и одна или несколько плат. Для устройства доступны следующие свойства:

* **Название** – краткое наименование устройства
* **Ревизия** – в случае с устройством, ревизия определяется ревизией главной, входящей в устройство, платы.
* **Исполнение** – обычно, одно исполнение устройства от другого отличается только комплектацией элементов.
* **Изображение** – картинка с внешним видом устройства
* **Перечень элементов** – список входящих в устройство элементов
* **Перечень плат** – список входящих в устройство плат

### Работа с системой

Первое что нужно сделать после регистрации, это заполнить справочники: поставщиков, типы элементов и элементы. После этого можно добавить в систему выпускаемую продукцию – платы и устройства.

Так как система в первую очередь оперирует запасами элементов, то существует два основных процесса: поступление элементов и списание элементов. На основании этих процессов как раз и формируется информация об остатках элементов на складе и их цене.

**Поступление элементов.** С помощью этой операции оформляется процедура покупки элементов.

![Поступление элементов](https://github.com/sdydykin/e-fabrika/blob/main/img/receipt_fsm.png?raw=true)

Процедура поступления элементов состоит из трех шагов: создание поступления элементов (черновик), формирование заказа (элементы заказаны, но еще не поступили на склад), передача элементов на склад. После формирования заказа увеличивается число заказанных элементов и цена на элемент пересчитывается с учетом заказанных элементов. Завершается поступление элементов командой передачи элементов на склад. После этой команды элементы из категории **Заказано** переходят в категорию **Поступило**.

Поступление элементов имеет следующие свойства:

* **Поставщик** – выбирается из справочника поставщиков элементов
* **Дата заказа** – дата заказа элементов у поставщика
* **Дата поставки** – дата поступления элементов от поставщика
* **Стоимость доставки** – общая стоимость доставки и других расходов, связанных с покупкой. Стоимость доставки распределяется на все элементы пропорционально их стоимости.
* **Примечание** – дополнительная информация о поставке
* **Перечень элементов** – элементы, входящие в поставку
* **Общая стоимость** – вычисляется автоматически по мере заполнения перечня элементов

**Списание элементов.** С помощью этой операции оформляется процедура списания элементов со склада. При списании элементов проверяется их доступность на складе. Если необходимое число элементов есть, то будет доступна команда забора элементов со склада. Если необходимого числа элементов нет, но они заказаны, их можно взять в резерв. Как только элементы поступят на склад, зарезервированные элементы можно будет забрать со склада с помощью соответствующей команды. Если необходимого числа элементов нет, будет доступна команда формирования ведомости на закупку недостающих элементов.

![Списание элементов](https://github.com/sdydykin/e-fabrika/blob/main/img/disposal_fsm.png?raw=true)

Списание элементов имеет следующие свойства:

* **Дата списания** – дата списания элементов со склада
* **Примечание** – дополнительная информация о списании
* **Перечень элементов** – элементы, входящие в списание
* **Перечень плат** – платы, входящие в списание
* **Перечень устройств** – устройства, входящие в списание
* **Общая стоимость** – общая стоимость списываемых (забираемых со склада) элементов. Рассчитывается автоматически.

## Как попробовать?

Попробовать систему можно по адресу [e-fabrika.pro](https://e-fabrika.pro)

Можете зарегестрироваться, или зайти под тестовым пользователем:

Имя пользователя: public@e-fabrika.pro

Пароль: 123456

## Программное окружение для развёртывания системы

Для развёртывания системы на сервере должн быть установлен Web-сервер Apache 2.4.18, сервер баз данных MySQL 14.14 и PHP версии 7.0.4

## Развёртывание системы

1. Копирование файлов в папку домена

   После копирования файлов в папку www необходимо настроить доступы к папке img, так как в эту папку по мере работы будут загружаться изображения, добавляемые пользователем.
2. Конфигурирование системы
   В репозитории есть образец файла конфигурации sys_config_exapmle.php. Его нужно переименовать в sys_config.php. Основная конфигурация системы будет хранится именно в файле sys_config.php. Этот файл позволяет настроить доступ к базе данных, контактную инфурмацию администратора системы, интерфейс.
3. Создание дазы данных

   mysql -u username -p -e "CREATE DATABASE my_database CHARACTER SET utf8 COLLATE utf8_general_ci;"

   mysql -u username -p my_database < create_db.sql
